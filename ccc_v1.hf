#url /api/v1
#type api
#base https://w3id.org/oc/ccc
#title REST API of the Open Biomedical Citations in Context Corpus (CCC)
#description This document describes the REST API of the [Open Biomedical Citations in Context Corpus (CCC)](https://w3id.org/oc/ccc) hosted by [OpenCitations](http://opencitations.net). All the operations described in this document return either a JSON document (default) or a CSV document according to the mimetype specified in the `Accept` header of the request.

The CCC is based on the Open Access subset of XML articles served by [Europe PubMed Central API](https://europepmc.org/RestfulWebService).
It includes information mined from the full-text of articles, such as in-text references (e.g. `(Daquino et al. 2020)`), structural elements (sentences, paragraphs, footnotes, captions, tables, and sections), rhetorical elements (e.g. section "Methods"), and the sequential number of the structural elements including in-text reference pointers (e.g. sentence 5, paragraph 2, section 1 "Introduction").

We extend the definition of [Open Citation Identifier (OCI)](https://doi.org/10.6084/m9.figshare.5844972) in order to identify *citation links* that are related to a specific in-text reference pointer, that is, the textual device that references a cited resource in the full-text of the citing resource.
Specifically, OCI may appear in the form `<citing_id>-<cited_id>{/<nth-occurrence>}`, where:

 * `<citing_id>` is the local identifier assigned to the citing resource in CCC
 * `<cited_id>` is the local identifier assigned to the cited resource in CCC
 * `<nth-occurrence>`, is the nth in-text reference pointer at hand denoting the cited resource (if applicable).

For instance `0701-0709/1` identifies the `1`st in-text reference appearing in (the text of) the citing article `0701` that is related to the cited article `0709`.

Moreover, CCC introduces the usage of [In-Text Reference Pointer IDentifier (InTRePID)](https://doi.org/10.6084/m9.figshare.11674032) to identify *in-text reference pointers*.
It is based on OCI, and it appears in the form `<citing_id>-<cited_id>/<nth-occurrence>-<total-count>`, where:

 * `<citing_id>` is the local identifier assigned to the citing resource in CCC
 * `<cited_id>` is the local identifier assigned to the cited resource in CCC
 * `<nth-occurrence>`, is the nth in-text reference pointer at hand denoting the cited resource (if applicable).
 * `<total-count>` corresponds to the total number of in-text reference pointers related to the same citation.

For instance, `0701-0709/1-2` and `0701-0709/2-2` represent the first and the second in-text reference pointer respectively that appear in the citing article `0701` that are related to the cited article `0709`.
InTrePIDs are dereferencable and the [InTrePID resolution service](http://opencitations.net/intrepid) allows one to retrieve the citation context  of a given InTrePID (such as identifiers of sentences, paragraphs, and sections where an in-text reference pointer appears).


If you would like to suggest additional operations, please use the [CCC issue tracker](https://github.com/opencitations/ccc/issues) available on GitHub to contact us.
#version 1.0.0
#license This document is licensed with a [Creative Commons Attribution 4.0 International License](https://creativecommons.org/licenses/by/4.0/legalcode), while the REST API itself has been created using [RAMOSE](https://github.com/opencitations/ramose), the *Restful API Manager Over SPARQL Endpoints*, which is licensed with an [ISC license](https://opensource.org/licenses/ISC).
#contacts [marilena.daquino@opencitations.net](mailto:marilena.daquino@opencitations.net)
#endpoint http://opencitations.net/ccc/sparql
#method post
#addon ccc_addon

#url /metadata/{dois}
#type operation
#dois str(\"?10\..+[^_\"]((__|\" \")10\..+[^_])*\"?)
#preprocess lower(dois) --> split_dois(dois)
#method get
#description This operation returns bibliographic metadata of one or more articles specified in input by means of their DOIs. In case multiple DOIs are specified, these must be separated with a double underscore ("\_\_") â€“ e.g. "10.1016/j.ejmech.2010.06.013\_\_10.1080/14756366.2020.1740695".

For each input DOI, the fields returned by the operation are the following:

* *ccc_id* the CCC local identifier of the specified bibliographic resource (e.g. "br/0709, br/0701");
* *author* the semicolon-separated list of authors of the specified bibliographic resource;
* *year* the year, year-month, or year-month-day of publication of the specified bibliographic resource;
* *title* the title of the specified bibliographic resource;
* *source_title* the title of the venue where the bibliographic resource is published (e.g. journal title);
* *volume* the number of the volume in which the specified bibliographic resource has been published;
* *issue* the number of the issue in which the specified bibliographic resource has been published;
* *page* the starting and ending pages of the specified bibliographic resource in the context of the venue where it has been published;
* *doi* the DOI of the specified bibliographic resource;
* *occ_reference* the semicolon-separated CCC local identifiers of all the bibliographic resources cited by the specified bibliographic resource;
* *doi_reference* the semicolon-separated DOIs of all the cited bibliographic resources that have such identifier associated;
* *citation_count* the number of citations received by the specified bibliographic resource.
#call /metadata/10.1126/science.aat5031__10.1084/jem.20200891
#field_type str(ccc_id) str(author) datetime(year) str(title) str(source_title) str(volume) str(issue) str(page) str(doi) str(occ_reference) str(doi_reference) int(citation_count)
#output_json [
    {
        "doi_reference": "10.1016/s0143-4004(98)90001-7; 10.1038/s41586-020-2316-7; 10.1016/j.placenta.2007.11.003; 10.1002/(sici)1099-1654(199712)7:4<219::aid-rmv205>3.0.co;2-e; 10.1530/rep-09-0092; 10.1016/j.placenta.2009.02.009; 10.1038/nbt.4096; 10.1016/0143-4004(87)90040-3; 10.3389/fimmu.2017.01357; 10.1093/infdis/jir432; 10.1038/onc.2009.189; 10.1038/s41596-020-0292-x; 10.1074/mcp.m113.035600; 10.3390/pathogens4040826; 10.3791/55107; 10.3389/fimmu.2019.00188; 10.1016/j.jtbi.2019.07.003; 10.1016/j.immuni.2016.02.024; 10.1126/science.1194637; 10.1038/nature13989; 10.1038/s41467-019-14123-z; 10.1016/j.placenta.2010.03.003; 10.1186/1742-4690-9-101; 10.1095/biolreprod.103.020651; 10.3389/fimmu.2014.00461; 10.1016/j.immuni.2007.11.011; 10.1038/s41586-018-0414-6; 10.3389/fimmu.2018.00412; 10.1530/rep-16-0159; 10.1038/tpj.2014.26; 10.1038/s41593-019-0566-1; 10.1038/nature22795; 10.1016/j.placenta.2020.01.005; 10.1016/s0143-4004(03)00082-1; 10.1073/pnas.1309561110; 10.1002/jcp.22549; 10.1038/s41591-020-0761-3; 10.1038/s41586-019-1631-3; 10.1093/nar/gkw199; 10.3389/fimmu.2018.02628; 10.1182/blood.v96.1.34; 10.1016/j.cell.2006.05.035; 10.3389/fimmu.2017.00888; 10.1016/j.chom.2018.04.013; 10.1095/biolreprod60.2.355; 10.3892/ol.2015.4035; 10.3389/fimmu.2019.01300; 10.4049/jimmunol.177.4.2651; 10.1126/science.aat5031; 10.1186/s12864-018-4772-0; 10.4049/jimmunol.1901185; 10.1111/j.1749-6632.2010.05932.x; 10.1073/pnas.1710470114; 10.1242/dev.163428; 10.1182/blood-2010-04-279489; 10.1038/s41586-018-0698-6; 10.1038/jid.2013.481; 10.1074/jbc.ra118.004565; 10.4049/jimmunol.181.9.6384; 10.1111/aji.12336; 10.1038/s41422-019-0228-6",
        "doi": "10.1084/jem.20200891",
        "volume": "218",
        "title": "Phenotypic and functional characterization of first-trimester human placental macrophages, Hofbauer cells",
        "occ_reference": "br/070448; br/070452; br/070456; br/070459; br/070460; br/070461; br/070462; br/070466; br/070470; br/070473; br/070477; br/070480; br/070483; br/070487; br/070491; br/070495; br/070499; br/070503; br/070506; br/070508; br/070511; br/070515; br/070519; br/070520; br/070523; br/070524; br/070528; br/070531; br/070535; br/070539; br/070541; br/070544; br/070547; br/070549; br/070552; br/070556; br/070560; br/070563; br/070565; br/070568; br/070572; br/070576; br/070580; br/070583; br/070587; br/070588; br/070592; br/070596; br/070597; br/070601; br/070604; br/070608; br/070609; br/070613; br/070616; br/070620; br/070621; br/070624; br/070628; br/070631; br/070635; br/070638; br/070641; br/070645; br/070649; br/070652; br/070656",
        "ccc_id": "br/070444",
        "author": "Thomas, Jake R.; Appios, Anna; Zhao, Xiaohui; Dutkiewicz, Roksana; Donde, Maria; Lee, Colin Y.C.; Naidu, Praveena; Lee, Christopher; Cerveira, Joana; Liu, Bing; Ginhoux, Florent; Burton, Graham; Hamilton, Russell S.; Moffett, Ashley; Sharkey, Andrew; McGovern, Naomi",
        "page": "",
        "source_title": "Journal of Experimental Medicine",
        "citation_count": "1",
        "issue": "1",
        "year": "2020-10-19"
    },
    {
        "doi_reference": "",
        "doi": "10.1126/science.aat5031",
        "volume": "365",
        "title": "Spatiotemporal immune zonation of the human kidney",
        "occ_reference": "",
        "ccc_id": "br/070613",
        "author": "Stewart, Benjamin J.; Ferdinand, John R.; Young, Matthew D.; Mitchell, Thomas J.; Loudon, Kevin W.; Riding, Alexandra M.; Richoz, Nathan; Frazer, Gordon L.; Staniforth, Joy U. L.; Vieira Braga, Felipe A.; Botting, Rachel A.; Popescu, Dorin-Mirel; Vento-Tormo, Roser; Stephenson, Emily; Cagan, Alex; Farndon, Sarah J.; Polanski, Krzysztof; Efremova, Mirjana; Green, Kile; Del Castillo Velasco-Herrera, Martin; Guzzo, Charlotte; Collord, Grace; Mamanova, Lira; Aho, Tevita; Armitage, James N.; Riddick, Antony C. P.; Mushtaq, Imran; Farrell, Stephen; Rampling, Dyanne; Nicholson, James; Filby, Andrew; Burge, Johanna; Lisgo, Steven; Lindsay, Susan; Bajenoff, Marc; Warren, Anne Y.; Stewart, Grant D.; Sebire, Neil; Coleman, Nicholas; Haniffa, Muzlifah; Teichmann, Sarah A.; Behjati, Sam; Clatworthy, Menna R.",
        "page": "1461-1466",
        "source_title": "Science",
        "citation_count": "1",
        "issue": "6460",
        "year": "2019-09-26"
    }
]
#sparql PREFIX cito: <http://purl.org/spar/cito/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>

SELECT DISTINCT ?ccc_id ?author ?year ?title ?source_title ?volume ?issue ?page ?doi ?occ_reference ?doi_reference ?citation_count
WHERE {
	VALUES ?doi { [[dois]] }

	?article a fabio:Expression ;
		datacite:hasIdentifier [
			datacite:usesIdentifierScheme datacite:doi ;
			literal:hasLiteralValue ?doi
		] .

	BIND (STRAFTER(str(?article), "https://w3id.org/oc/ccc/") as ?ccc_id)

    {
        SELECT DISTINCT ?article (GROUP_CONCAT(?cited_ccc_id; separator="; ") as ?occ_reference) (GROUP_CONCAT(?cited_doi; separator="; ") as ?doi_reference) {
            VALUES ?doi { [[dois]] }

            ?article a fabio:Expression ;
                datacite:hasIdentifier [
                    datacite:usesIdentifierScheme datacite:doi ;
                    literal:hasLiteralValue ?doi
                ] .

            OPTIONAL {
                ?article cito:cites ?cited .
                BIND(STRAFTER(str(?cited), "https://w3id.org/oc/ccc/") as ?cited_ccc_id)

                OPTIONAL {
                    ?cited datacite:hasIdentifier [
                        datacite:usesIdentifierScheme datacite:doi ;
                        literal:hasLiteralValue ?cited_doi
                    ] .
                    FILTER(!STRSTARTS(?cited_doi, "http") && !STRENDS(?cited_doi, ".") && !STRENDS(?cited_doi, "("))
                }
            }
        } GROUP BY ?article
    }

	{
		SELECT ?article ?doi (count(?doi) as ?citation_count) {
			VALUES ?doi { [[dois]] }

			?article a fabio:Expression ;
                datacite:hasIdentifier [
                    datacite:usesIdentifierScheme datacite:doi ;
                    literal:hasLiteralValue ?doi
                ] .

			OPTIONAL { ?article ^cito:cites ?other }
		} GROUP BY ?article ?doi
	}

	{
		SELECT ?article ?doi (GROUP_CONCAT(?a; separator="; ") as ?author) {
			VALUES ?doi { [[dois]] }

			{
			SELECT ?article ?doi ?a (count(?next) as ?tot) {
				VALUES ?doi { [[dois]] }

				?article a fabio:Expression ;
					datacite:hasIdentifier [
						datacite:usesIdentifierScheme datacite:doi ;
						literal:hasLiteralValue ?doi
					] .

				OPTIONAL {
					?article pro:isDocumentContextFor ?role .
					?role pro:withRole pro:author ; pro:isHeldBy [
						foaf:familyName ?f_name ;
						foaf:givenName ?g_name
					] .
					OPTIONAL { ?role oco:hasNext* ?next }
					BIND(CONCAT(?f_name, ", ",?g_name) as ?a)
				}
			} GROUP BY ?article ?doi ?a ORDER BY DESC(?tot)}
		} GROUP BY ?article ?doi
	}

	OPTIONAL { ?article ^cito:cites ?other }
	OPTIONAL { ?article dcterms:title ?title }
	OPTIONAL { ?article prism:publicationDate ?year }
	OPTIONAL {
		?article frbr:partOf+ ?source .
		FILTER NOT EXISTS {
			?source frbr:partOf ?another_source
		}
		?source dcterms:title ?source_title
	}
	OPTIONAL {
		?article frbr:partOf+ ?v .
		?v a fabio:JournalVolume ;
			fabio:hasSequenceIdentifier ?volume
	}
	OPTIONAL {
		?article frbr:partOf+ ?i .
		?i a fabio:JournalIssue ;
			fabio:hasSequenceIdentifier ?issue
	}
	OPTIONAL {
		?article frbr:embodiment ?man .
		?man prism:startingPage ?start .
		OPTIONAL { ?man prism:endingPage ?end }
		BIND (CONCAT(?start, IF(bound(?end), CONCAT("-", ?end), "")) as ?page)
	}
}
LIMIT 10000

#url /references/{doi}
#type operation
#doi str(10\..+)
#preprocess encode(doi)
#method get
#description This operation retrieves citation data of all the bibliographic resources *cited by the bibliographic resource identified by the input DOI*, as they appear in the reference list.

For each cited bibliographic resource, the fields returned by this operation are the following:

* *citing_doi* the DOI of the input citing bibliographic resource;
* *cited_doi* the DOI of the cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intrepids* the semi-colon separated list of In-Text Reference Identifiers of all the in-text references denoting the bibliographic reference at hand;
* *reference* the text of the bibliographic reference entry
#call /references/10.1084/jem.20200891
#output_json [
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41586-018-0698-6",
        "intrepids": "070444-070638/7-9; 070444-070638/8-9; 070444-070638/9-9; 070444-070638/1-9; 070444-070638/2-9; 070444-070638/3-9; 070444-070638/4-9; 070444-070638/5-9; 070444-070638/6-9",
        "oci": "070272",
        "reference": "Vento-Tormo, R,, Efremova, M,, Botting, R.A,, Turco, M.Y,, Vento-Tormo, M,, Meyer, K.B,, Park, J.E,, Stephenson, E,, PolaÅ„ski, K,, Goncalves, A,. 2018 Single-cell reconstruction of the early maternal-fetal interface in humans. Nature. 563: 347â€“353. DOI: 10.1038/s41586-018-0698-6 PMID: 30429548"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/jid.2013.481",
        "intrepids": "070444-070641/1-1",
        "oci": "070273",
        "reference": "Wang, X.N,, McGovern, N,, Gunawan, M,, Richardson, C,, Windebank, M,, Siah, T.W,, Lim, H.Y,, Fink, K,, Yao Li, J.L,, Ng, L.G,. 2014 A three-dimensional atlas of human dermal leukocytes, lymphatics, and blood vessels. J. Invest. Dermatol. 134: 965â€“974. DOI: 10.1038/jid.2013.481 PMID: 24352044"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1074/jbc.ra118.004565",
        "intrepids": "070444-070645/1-1",
        "oci": "070274",
        "reference": "Ward, M.G,, Li, G, and, Hao, M. 2018 Apoptotic Î²-cells induce macrophage reprogramming under diabetic conditions. J. Biol. Chem. 293: 16160â€“16173. DOI: 10.1074/jbc.RA118.004565 PMID: 30213857"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.4049/jimmunol.181.9.6384",
        "intrepids": "070444-070649/1-1",
        "oci": "070275",
        "reference": "Wu, Y,, Li, Y-Y,, Matsushima, K,, Baba, T, and, Mukaida, N. 2008 CCL3-CCR5 axis regulates intratumoral accumulation of leukocytes and fibroblasts and promotes angiogenesis in murine lung metastasis process. J. Immunol. 181: 6384â€“6393. DOI: 10.4049/jimmunol.181.9.6384 PMID: 18941229"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1111/aji.12336",
        "intrepids": "070444-070652/1-1",
        "oci": "070276",
        "reference": "Young, O.M,, Tang, Z,, Niven-Fairchild, T,, Tadesse, S,, Krikun, G,, Norwitz, E.R,, Mor, G,, Abrahams, V.M, and, Guller, S. 2015 Toll-like receptor-mediated responses by placental Hofbauer cells (HBCs): a potential pro-inflammatory role for fetal M2 macrophages. Am. J. Reprod. Immunol. 73: 22â€“35. DOI: 10.1111/aji.12336 PMID: 25345551"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41422-019-0228-6",
        "intrepids": "070444-070656/1-3; 070444-070656/2-3; 070444-070656/3-3",
        "oci": "070277",
        "reference": "Zeng, Y,, He, J,, Bai, Z,, Li, Z,, Gong, Y,, Liu, C,, Ni, Y,, Du, J,, Ma, C,, Bian, L,. 2019 Tracing the first hematopoietic stem cell generation in human embryo by single-cell RNA sequencing. Cell Res. 29: 881â€“894. DOI: 10.1038/s41422-019-0228-6 PMID: 31501518"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/s0143-4004(98)90001-7",
        "intrepids": "070444-070448/1-1",
        "oci": "070211",
        "reference": "Arany, E, and, Hill, D.J. 1998 Fibroblast growth factor-2 and fibroblast growth factor receptor-1 mRNA expression and peptide localization in placentae from normal and diabetic pregnancies. Placenta. 19: 133â€“142. DOI: 10.1016/S0143-4004(98)90001-7 PMID: 9548179"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41586-020-2316-7",
        "intrepids": "070444-070452/1-5; 070444-070452/2-5; 070444-070452/3-5; 070444-070452/4-5; 070444-070452/5-5",
        "oci": "070212",
        "reference": "Bian, Z,, Gong, Y,, Huang, T,, Lee, C.Z.W,, Bian, L,, Bai, Z,, Shi, H,, Zeng, Y,, Liu, C,, He, J,. 2020 Deciphering human macrophage development at single-cell resolution. Nature. 582: 571â€“576. DOI: 10.1038/s41586-020-2316-7 PMID: 32499656"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.placenta.2007.11.003",
        "intrepids": "070444-070456/1-1",
        "oci": "070213",
        "reference": "BÃ¶ckle, B.C,, SÃ¶lder, E,, Kind, S,, Romani, N, and, Sepp, N.T. 2008 DC-sign+ CD163+ macrophages expressing hyaluronan receptor LYVE-1 are located within chorion villi of the placenta. Placenta. 29: 187â€“192. DOI: 10.1016/j.placenta.2007.11.003 PMID: 18078989"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "",
        "intrepids": "070444-070459/1-1",
        "oci": "070214",
        "reference": "Boyd, J.D. and, Hamilton, W.J. 1970 Stroma of villi. In The Human Placenta. Heffer, Cambridge."
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "",
        "intrepids": "070444-070460/1-1",
        "oci": "070215",
        "reference": "Bulmer, J.N,, Morrison, L, and, Smith, J.C. 1988 Expression of class II MHC gene products by macrophages in human uteroplacental tissue. Immunology. 63: 707â€“714. PMID: 3284818"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "",
        "intrepids": "070444-070461/1-1",
        "oci": "070216",
        "reference": "Burton, G.J. 1986 Scanning electron microscopy of intervillous connections in the mature human placenta. J. Anat. 147: 245â€“254. PMID: 3693075"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1002/(sici)1099-1654(199712)7:4<219::aid-rmv205>3.0.co;2-e",
        "intrepids": "070444-070462/1-6; 070444-070462/2-6; 070444-070462/3-6; 070444-070462/4-6; 070444-070462/5-6; 070444-070462/6-6",
        "oci": "070217",
        "reference": "Burton, G.J, and, Watson, A.L. 1997 The structure of the human placenta: Implications for initiating and defending against virus infections. Rev. Med. Virol. 7: 219â€“228. DOI: 10.1002/(SICI)1099-1654(199712)7:4<219:AID-RMV205>3.0.CO;2-E PMID: 10398486"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1530/rep-09-0092",
        "intrepids": "070444-070466/1-1",
        "oci": "070218",
        "reference": "Burton, G.J,, Charnock-Jones, D.S, and, Jauniaux, E. 2009 a Regulation of vascular growth and function in the human placenta. Reproduction. 138: 895â€“902. DOI: 10.1530/REP-09-0092 PMID: 19470597"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.placenta.2009.02.009",
        "intrepids": "070444-070470/1-1",
        "oci": "070219",
        "reference": "Burton, G.J,, Woods, A.W,, Jauniaux, E, and, Kingdom, J.C.P. 2009 b Rheological and physiological consequences of conversion of the maternal spiral arteries for uteroplacental blood flow during human pregnancy. Placenta. 30: 473â€“482. DOI: 10.1016/j.placenta.2009.02.009 PMID: 19375795"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/nbt.4096",
        "intrepids": "070444-070473/1-1",
        "oci": "070220",
        "reference": "Butler, A,, Hoffman, P,, Smibert, P,, Papalexi, E, and, Satija, R. 2018 Integrating single-cell transcriptomic data across different conditions, technologies, and species. Nat. Biotechnol. 36: 411â€“420. DOI: 10.1038/nbt.4096 PMID: 29608179"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/0143-4004(87)90040-3",
        "intrepids": "070444-070477/1-1",
        "oci": "070221",
        "reference": "Castellucci, M,, Celona, A,, Bartels, H,, Steininger, B,, Benedetto, V, and, Kaufmann, P. 1987 Mitosis of the Hofbauer cell: possible implications for a fetal macrophage. Placenta. 8: 65â€“76. DOI: 10.1016/0143-4004(87)90040-3 PMID: 3588557"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3389/fimmu.2017.01357",
        "intrepids": "070444-070480/1-1",
        "oci": "070222",
        "reference": "Costa, M.L,, Robinette, M.L,, Bugatti, M,, Longtine, M.S,, Colvin, B.N,, Lantelme, E,, Vermi, W,, Colonna, M,, Nelson, D.M, and, Cella, M. 2017 Two distinct myeloid subsets at the term human fetal-maternal interface. Front. Immunol. 8: 1357 DOI: 10.3389/fimmu.2017.01357 PMID: 29123519"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1093/infdis/jir432",
        "intrepids": "070444-070483/1-1",
        "oci": "070223",
        "reference": "Dâ€™Avila, H,, Freire-de-Lima, C.G,, Roque, N.R,, Teixeira, L,, Barja-Fidalgo, C,, Silva, A.R,, Melo, R.C.N,, Dosreis, G.A,, Castro-Faria-Neto, H.C, and, Bozza, P.T. 2011 Host cell lipid bodies triggered by Trypanosoma cruzi infection and enhanced by the uptake of apoptotic cells are associated with prostaglandin E 2 generation and increased parasite growth. J. Infect. Dis. 204: 951â€“961. DOI: 10.1093/infdis/jir432 PMID: 21849292"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/onc.2009.189",
        "intrepids": "070444-070487/1-2; 070444-070487/2-2",
        "oci": "070224",
        "reference": "Dai, J,, Peng, L,, Fan, K,, Wang, H,, Wei, R,, Ji, G,, Cai, J,, Lu, B,, Li, B,, Zhang, D,. 2009 Osteopontin induces angiogenesis through activation of PI3K/AKT and ERK1/2 in endothelial cells. Oncogene. 28: 3412â€“3422. DOI: 10.1038/onc.2009.189 PMID: 19597469"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41596-020-0292-x",
        "intrepids": "070444-070491/1-1",
        "oci": "070225",
        "reference": "Efremova, M,, Vento-Tormo, M,, Teichmann, S.A, and, Vento-Tormo, R. 2020 CellPhoneDB: inferring cell-cell communication from combined expression of multi-subunit ligand-receptor complexes. Nat. Protoc. 15: 1484â€“1506. DOI: 10.1038/s41596-020-0292-x PMID: 32103204"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1074/mcp.m113.035600",
        "intrepids": "070444-070495/1-1",
        "oci": "070226",
        "reference": "Fagerberg, L,, HallstrÃ¶m, B.M,, Oksvold, P,, Kampf, C,, Djureinovic, D,, Odeberg, J,, Habuka, M,, Tahmasebpoor, S,, Danielsson, A,, Edlund, K,. 2014 Analysis of the human tissue-specific expression by genome-wide integration of transcriptomics and antibody-based proteomics. Mol. Cell. Proteomics. 13: 397â€“406. DOI: 10.1074/mcp.M113.035600 PMID: 24309898"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3390/pathogens4040826",
        "intrepids": "070444-070499/1-1",
        "oci": "070227",
        "reference": "Flannagan, R.S,, Heit, B, and, Heinrichs, D.E. 2015 Antimicrobial mechanisms of macrophages and the immune evasion strategies of Staphylococcus aureus. Pathogens. 4: 826â€“868. DOI: 10.3390/pathogens4040826 PMID: 26633519"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3791/55107",
        "intrepids": "070444-070503/1-3; 070444-070503/2-3; 070444-070503/3-3",
        "oci": "070228",
        "reference": "Foote, J.R,, Levine, A.P,, Behe, P,, Duchen, M.R, and, Segal, A.W. 2017 Imaging the neutrophil phagosome and cytoplasm using a ratiometric pH indicator. J. Vis. Exp. (122). DOI: 10.3791/55107"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3389/fimmu.2019.00188",
        "intrepids": "070444-070506/1-1",
        "oci": "070229",
        "reference": "Foote, J.R,, Patel, A.A,, Yona, S, and, Segal, A.W. 2019 Variations in the phagosomal environment of human neutrophils and mononuclear phagocyte subsets. Front. Immunol. 10: 188 DOI: 10.3389/fimmu.2019.00188 PMID: 30881356"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.jtbi.2019.07.003",
        "intrepids": "070444-070508/1-1",
        "oci": "070230",
        "reference": "Ford, H.Z,, Byrne, H.M, and, Myerscough, M.R. 2019 A lipid-structured model for macrophage populations in atherosclerotic plaques. J. Theor. Biol. 479: 48â€“63. DOI: 10.1016/j.jtbi.2019.07.003 PMID: 31319051"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.immuni.2016.02.024",
        "intrepids": "070444-070511/1-1",
        "oci": "070231",
        "reference": "Ginhoux, F, and, Guilliams, M. 2016 Tissue-Resident Macrophage Ontogeny and Homeostasis. Immunity. 44: 439â€“449. DOI: 10.1016/j.immuni.2016.02.024 PMID: 26982352"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1126/science.1194637",
        "intrepids": "070444-070515/1-1",
        "oci": "070232",
        "reference": "Ginhoux, F,, Greter, M,, Leboeuf, M,, Nandi, S,, See, P,, Gokhan, S,, Mehler, M.F,, Conway, S.J,, Ng, L.G,, Stanley, E.R,. 2010 Fate mapping analysis reveals that adult microglia derive from primitive macrophages. Science. 330: 841â€“845. DOI: 10.1126/science.1194637 PMID: 20966214"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "",
        "intrepids": "070444-070519/1-2; 070444-070519/2-2",
        "oci": "070233",
        "reference": "Goldstein, J,, Braverman, M,, Salafia, C, and, Buckley, P. 1988 The phenotype of human placental macrophages and its variation with gestational age. Am. J. Pathol. 133: 648â€“659. PMID: 3264459"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/nature13989",
        "intrepids": "070444-070520/1-1",
        "oci": "070234",
        "reference": "Gomez Perdiguero, E,, Klapproth, K,, Schulz, C,, Busch, K,, Azzoni, E,, Crozet, L,, Garner, H,, Trouillet, C,, de Bruijn, M.F,, Geissmann, F, and, Rodewald, H.R. 2015 Tissue-resident macrophages originate from yolk-sac-derived erythro-myeloid progenitors. Nature. 518: 547â€“551. DOI: 10.1038/nature13989 PMID: 25470051"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "",
        "intrepids": "070444-070523/1-1",
        "oci": "070235",
        "reference": "Hammond, M.E,, Lapointe, G.R,, Feucht, P.H,, Hilt, S,, Gallegos, C.A,, Gordon, C.A,, Giedlin, M.A,, Mullenbach, G, and, Tekamp-Olson, P. 1995 IL-8 induces neutrophil chemotaxis predominantly via type I IL-8 receptors. J. Immunol. 155: 1428â€“1433. PMID: 7636208"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41467-019-14123-z",
        "intrepids": "070444-070524/1-1",
        "oci": "070236",
        "reference": "Huhn, O,, Ivarsson, M.A,, Gardner, L,, Hollinshead, M,, Stinchcombe, J.C,, Chen, P,, Shreeve, N,, Chazara, O,, Farrell, L.E,, Theorell, J,. 2020 Distinctive phenotypes and functions of innate lymphoid cells in human decidua during early pregnancy. Nat. Commun. 11: 381 DOI: 10.1038/s41467-019-14123-z PMID: 31959757"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.placenta.2010.03.003",
        "intrepids": "070444-070528/1-1",
        "oci": "070237",
        "reference": "Ingman, K,, Cookson, V.J.K.W,, Jones, C.J.P, and, Aplin, J.D. 2010 Characterisation of Hofbauer cells in first and second trimester placenta: incidence, phenotype, survival in vitro and motility. Placenta. 31: 535â€“544. DOI: 10.1016/j.placenta.2010.03.003 PMID: 20347485"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1186/1742-4690-9-101",
        "intrepids": "070444-070531/1-1",
        "oci": "070238",
        "reference": "Johnson, E.L, and, Chakraborty, R. 2012 Placental Hofbauer cells limit HIV-1 replication and potentially offset mother to child transmission (MTCT) by induction of immunoregulatory cytokines. Retrovirology. 9: 101 DOI: 10.1186/1742-4690-9-101 PMID: 23217137"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1095/biolreprod.103.020651",
        "intrepids": "070444-070535/1-2; 070444-070535/2-2",
        "oci": "070239",
        "reference": "Johnson, G.A,, Burghardt, R.C,, Bazer, F.W, and, Spencer, T.E. 2003 Osteopontin: roles in implantation and placentation. Biol. Reprod. 69: 1458â€“1471. DOI: 10.1095/biolreprod.103.020651 PMID: 12890718"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3389/fimmu.2014.00461",
        "intrepids": "070444-070539/1-1",
        "oci": "070240",
        "reference": "Kawasaki, T, and, Kawai, T. 2014 Toll-like receptor signaling pathways. Front. Immunol. 5: 461 DOI: 10.3389/fimmu.2014.00461 PMID: 25309543"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.immuni.2007.11.011",
        "intrepids": "070444-070541/1-1",
        "oci": "070241",
        "reference": "Kobayashi, N,, Karisola, P,, PeÃ±a-Cruz, V,, Dorfman, D.M,, Jinushi, M,, Umetsu, S.E,, Butte, M.J,, Nagumo, H,, Chernova, I,, Zhu, B,. 2007 T cell Immunoglobulin Mucin Protein (TIM)-4 binds phosphatidylserine and mediates uptake of apoptotic cells. Immunity. DOI: 10.1016/j.immuni.2007.11.011"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41586-018-0414-6",
        "intrepids": "070444-070544/1-2; 070444-070544/2-2",
        "oci": "070242",
        "reference": "La Manno, G,, Soldatov, R,, Zeisel, A,, Braun, E,, Hochgerner, H,, Petukhov, V,, Lidschreiber, K,, Kastriti, M.E,, LÃ¶nnerberg, P,, Furlan, A,. 2018 RNA velocity of single cells. Nature. 560: 494â€“498. DOI: 10.1038/s41586-018-0414-6 PMID: 30089906"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3389/fimmu.2018.00412",
        "intrepids": "070444-070547/1-1",
        "oci": "070243",
        "reference": "Lien, M.Y,, Tsai, H.C,, Chang, A.C,, Tsai, M.H,, Hua, C.H,, Wang, S.W, and, Tang, C.H. 2018 Chemokine CCL4 induces vascular endothelial growth factor C expression and lymphangiogenesis by miR-195-3p in oral squamous cell carcinoma. Front. Immunol. 9: 412 DOI: 10.3389/fimmu.2018.00412 PMID: 29599774"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1530/rep-16-0159",
        "intrepids": "070444-070549/1-1",
        "oci": "070244",
        "reference": "Loegl, J,, Hiden, U,, Nussbaumer, E,, Schliefsteiner, C,, Cvitic, S,, Lang, I,, Wadsack, C,, Huppertz, B, and, Desoye, G. 2016 Hofbauer cells of M2a, M2b and M2c polarization may regulate feto-placental angiogenesis. Reproduction. 152: 447â€“455. DOI: 10.1530/REP-16-0159 PMID: 27534571"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/tpj.2014.26",
        "intrepids": "070444-070552/1-2; 070444-070552/2-2",
        "oci": "070245",
        "reference": "Luizon, M.R,, Palei, A.C.T,, Sandrim, V.C,, Amaral, L.M,, Machado, J.S.R,, Lacchini, R,, Cavalli, R.C,, Duarte, G, and, Tanus-Santos, J.E. 2014 Tissue inhibitor of matrix metalloproteinase-1 polymorphism, plasma TIMP-1 levels, and antihypertensive therapy responsiveness in hypertensive disorders of pregnancy. Pharmacogenomics J. 14: 535â€“541. DOI: 10.1038/tpj.2014.26 PMID: 24913092"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41593-019-0566-1",
        "intrepids": "070444-070556/1-1",
        "oci": "070246",
        "reference": "Marschallinger, J,, Iram, T,, Zardeneta, M,, Lee, S.E,, Lehallier, B,, Haney, M.S,, Pluvinage, J.V,, Mathur, V,, Hahn, O,, Morgens, D.W,. 2020 Lipid-droplet-accumulating microglia represent a dysfunctional and proinflammatory state in the aging brain. Nat. Neurosci. 23: 194â€“208. DOI: 10.1038/s41593-019-0566-1 PMID: 31959936"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/nature22795",
        "intrepids": "070444-070560/1-2; 070444-070560/2-2",
        "oci": "070247",
        "reference": "McGovern, N,, Shin, A,, Low, G,, Low, D,, Duan, K,, Yao, L.J,, Msallam, R,, Low, I,, Shadan, N.B,, Sumatoh, H.R,. 2017 Human fetal dendritic cells promote prenatal T-cell immune suppression through arginase-2. Nature. 546: 662â€“666. DOI: 10.1038/nature22795 PMID: 28614294"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.placenta.2020.01.005",
        "intrepids": "070444-070563/1-2; 070444-070563/2-2",
        "oci": "070248",
        "reference": "Pavlov, O.V,, Selutin, A.V,, Pavlova, O.M, and, Selkov, S.A. 2020 Two patterns of cytokine production by placental macrophages. Placenta. 91: 1â€“10. DOI: 10.1016/j.placenta.2020.01.005 PMID: 31941612"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/s0143-4004(03)00082-1",
        "intrepids": "070444-070565/1-1",
        "oci": "070249",
        "reference": "Pierleoni, C,, Castellucci, M,, Kaufmann, P,, Lund, L.R, and, Schnack Nielsen, B. 2003 Urokinase receptor is up-regulated in endothelial cells and macrophages associated with fibrinoid deposits in the human placenta. Placenta. 24: 677â€“685. DOI: 10.1016/S0143-4004(03)00082-1 PMID: 12828926"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1073/pnas.1309561110",
        "intrepids": "070444-070568/1-2; 070444-070568/2-2",
        "oci": "070250",
        "reference": "Plaks, V,, Rinkenberger, J,, Dai, J,, Flannery, M,, Sund, M,, Kanasaki, K,, Ni, W,, Kalluri, R, and, Werb, Z. 2013 Matrix metalloproteinase-9 deficiency phenocopies features of preeclampsia and intrauterine growth restriction. Proc. Natl. Acad. Sci. USA. 110: 11109â€“11114. DOI: 10.1073/pnas.1309561110 PMID: 23776237"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1002/jcp.22549",
        "intrepids": "070444-070572/1-2; 070444-070572/2-2",
        "oci": "070251",
        "reference": "Poggio, P,, Grau, J.B,, Field, B.C,, Sainger, R,, Seefried, W.F,, Rizzolio, F, and, Ferrari, G. 2011 Osteopontin controls endothelial cell migration in vitro and in excised human valvular tissue from patients with calcific aortic stenosis and controls. J. Cell. Physiol. 226: 2139â€“2149. DOI: 10.1002/jcp.22549 PMID: 21520066"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41591-020-0761-3",
        "intrepids": "070444-070576/1-2; 070444-070576/2-2",
        "oci": "070252",
        "reference": "Rackaityte, E,, Halkias, J,, Fukui, E.M,, Mendoza, V.F,, Hayzelden, C,, Crawford, E.D,, Fujimura, K.E,, Burt, T.D, and, Lynch, S.V. 2020 Viable bacterial colonization is highly limited in the human intestine in utero. Nat. Med. 26: 599â€“607. DOI: 10.1038/s41591-020-0761-3 PMID: 32094926"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1038/s41586-019-1631-3",
        "intrepids": "070444-070580/1-3; 070444-070580/2-3; 070444-070580/3-3",
        "oci": "070253",
        "reference": "Ramachandran, P,, Dobie, R,, Wilson-Kanamori, J.R,, Dora, E.F,, Henderson, B.E.P,, Luu, N.T,, Portman, J.R,, Matchett, K.P,, Brice, M,, Marwick, J.A,. 2019 Resolving the fibrotic niche of human liver cirrhosis at single-cell level. Nature. 575: 512â€“518. DOI: 10.1038/s41586-019-1631-3 PMID: 31597160"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1093/nar/gkw199",
        "intrepids": "",
        "oci": "070254",
        "reference": "Reimand, J,, Arak, T,, Adler, P,, Kolberg, L,, Reisberg, S,, Peterson, H, and, Vilo, J. 2016 g:Profiler-a web server for functional interpretation of gene lists (2016 update). Nucleic Acids Res. 44: W83-9. DOI: 10.1093/nar/gkw199 PMID: 27098042"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3389/fimmu.2018.02628",
        "intrepids": "070444-070587/1-1",
        "oci": "070255",
        "reference": "Reyes, L, and, Golos, T.G. 2018 Hofbauer cells: Their role in healthy and complicated pregnancy. Front. Immunol. 9: 2628 DOI: 10.3389/fimmu.2018.02628 PMID: 30498493"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1182/blood.v96.1.34",
        "intrepids": "070444-070588/1-1",
        "oci": "070256",
        "reference": "Salcedo, R,, Ponce, M.L,, Young, H.A,, Wasserman, K,, Ward, J.M,, Kleinman, H.K,, Oppenheim, J.J, and, Murphy, W.J. 2000 Human endothelial cells express CCR2 and respond to MCP-1: direct role of MCP-1 in angiogenesis and tumor progression. Blood. 96: 34â€“40. DOI: 10.1182/blood.V96.1.34 PMID: 10891427"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.cell.2006.05.035",
        "intrepids": "070444-070592/1-1",
        "oci": "070257",
        "reference": "Savina, A,, Jancic, C,, Hugues, S,, Guermonprez, P,, Vargas, P,, Moura, I.C,, Lennon-DumÃ©nil, A.M,, Seabra, M.C,, Raposo, G, and, Amigorena, S. 2006 NOX2 controls phagosomal pH to regulate antigen processing during crosspresentation by dendritic cells. Cell. 126: 205â€“218. DOI: 10.1016/j.cell.2006.05.035 PMID: 16839887"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3389/fimmu.2017.00888",
        "intrepids": "070444-070596/1-1",
        "oci": "070258",
        "reference": "Schliefsteiner, C,, Peinhaupt, M,, Kopp, S,, LÃ¶gl, J,, Lang-Olip, I,, Hiden, U,, Heinemann, A,, Desoye, G, and, Wadsack, C. 2017 Human placental Hofbauer cells maintain an anti-inflammatory M2 phenotype despite the presence of gestational diabetes mellitus. Front. Immunol. 8: 888 DOI: 10.3389/fimmu.2017.00888 PMID: 28824621"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1016/j.chom.2018.04.013",
        "intrepids": "070444-070597/1-1",
        "oci": "070259",
        "reference": "Sedlyarov, V,, Eichner, R,, Girardi, E,, Essletzbichler, P,, Goldmann, U,, Nunes-Hasler, P,, Srndic, I,, Moskovskich, A,, Heinz, L.X,, Kartnig, F,. 2018 The Bicarbonate Transporter SLC4A7 Plays a Key Role in Macrophage Phagosome Acidification. Cell Host Microbe. 23: 766â€“774.e5. DOI: 10.1016/j.chom.2018.04.013 PMID: 29779931"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1095/biolreprod60.2.355",
        "intrepids": "070444-070601/1-1",
        "oci": "070260",
        "reference": "Sharkey, A.M,, King, A,, Clark, D.E,, Burrows, T.D,, Jokhi, P.P,, Charnock-Jones, D.S,, Loke, Y.W, and, Smith, S.K. 1999 Localization of leukemia inhibitory factor and its receptor in human placenta throughout pregnancy. Biol. Reprod. 60: 355â€“364. DOI: 10.1095/biolreprod60.2.355 PMID: 9916002"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3892/ol.2015.4035",
        "intrepids": "070444-070604/1-3; 070444-070604/2-3; 070444-070604/3-3",
        "oci": "070261",
        "reference": "Shi, J, and, Wei, P.K. 2016 Interleukin-8: A potent promoter of angiogenesis in gastric cancer. Oncol. Lett. 11: 1043â€“1050. DOI: 10.3892/ol.2015.4035 PMID: 26893688"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.3389/fimmu.2019.01300",
        "intrepids": "070444-070608/1-1",
        "oci": "070262",
        "reference": "Solders, M,, Gorchs, L,, Tiblad, E,, GidlÃ¶f, S,, Leeansyah, E,, Dias, J,, Sandberg, J.K,, Magalhaes, I,, Lundell, A.C, and, Kaipe, H. 2019 Recruitment of MAIT cells to the intervillous space of the placenta by placenta-derived chemokines. Front. Immunol. 10: 1300 DOI: 10.3389/fimmu.2019.01300 PMID: 31244846"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.4049/jimmunol.177.4.2651",
        "intrepids": "070444-070609/1-1",
        "oci": "070263",
        "reference": "Stamatovic, S.M,, Keep, R.F,, Mostarica-Stojkovic, M, and, Andjelkovic, A.V. 2006 CCL2 regulates angiogenesis via activation of Ets-1 transcription factor. J. Immunol. 177: 2651â€“2661. DOI: 10.4049/jimmunol.177.4.2651 PMID: 16888027"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1126/science.aat5031",
        "intrepids": "070444-070613/1-2; 070444-070613/2-2",
        "oci": "070264",
        "reference": "Stewart, B.J,, Ferdinand, J.R,, Young, M.D,, Mitchell, T.J,, Loudon, K.W,, Riding, A.M,, Richoz, N,, Frazer, G.L,, Staniforth, J.U.L,, Vieira Braga, F.A,. 2019 Spatiotemporal immune zonation of the human kidney. Science. 365: 1461â€“1466. DOI: 10.1126/science.aat5031 PMID: 31604275"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1186/s12864-018-4772-0",
        "intrepids": "070444-070616/1-2; 070444-070616/2-2",
        "oci": "070265",
        "reference": "Street, K,, Risso, D,, Fletcher, R.B,, Das, D,, Ngai, J,, Yosef, N,, Purdom, E, and, Dudoit, S. 2018 Slingshot: cell lineage and pseudotime inference for single-cell transcriptomics. BMC Genomics. 19: 477 DOI: 10.1186/s12864-018-4772-0 PMID: 29914354"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "",
        "intrepids": "070444-070620/1-1",
        "oci": "070266",
        "reference": "Sutton, L,, Mason, D.Y, and, Redman, C.W. 1983 HLA-DR positive cells in the human placenta. Immunology. 49: 103â€“112. PMID: 6220962"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.4049/jimmunol.1901185",
        "intrepids": "070444-070621/1-2; 070444-070621/2-2",
        "oci": "070267",
        "reference": "Swieboda, D,, Johnson, E.L,, Beaver, J,, Haddad, L,, Enninga, E.A.L,, Hathcock, M,, Cordes, S,, Jean, V,, Lane, I,, Skountzou, I, and, Chakraborty, R. 2020 Babyâ€™s First Macrophage: Temporal Regulation of Hofbauer Cell Phenotype Influences Ligand-Mediated Innate Immune Responses across Gestation. J. Immunol. 204: 2380â€“2391. DOI: 10.4049/jimmunol.1901185 PMID: 32213562"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1111/j.1749-6632.2010.05932.x",
        "intrepids": "070444-070624/1-2; 070444-070624/2-2",
        "oci": "070268",
        "reference": "Tang, Z,, Abrahams, V.M,, Mor, G, and, Guller, S. 2011 Placental Hofbauer cells and complications of pregnancy. Ann. N. Y. Acad. Sci. 1221: 103â€“108. DOI: 10.1111/j.1749-6632.2010.05932.x PMID: 21401637"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1073/pnas.1710470114",
        "intrepids": "070444-070628/1-1",
        "oci": "070269",
        "reference": "Tsang, J.C.H,, Vong, J.S.L,, Ji, L,, Poon, L.C.Y,, Jiang, P,, Lui, K.O,, Ni, Y.B,, To, K.F,, Cheng, Y.K.Y,, Chiu, R.W.K, and, Lo, Y.M.D. 2017 Integrative single-cell and cell-free plasma RNA transcriptomics elucidates placental cellular dynamics. Proc. Natl. Acad. Sci. USA. 114: E7786â€“E7795. DOI: 10.1073/pnas.1710470114 PMID: 28830992"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1242/dev.163428",
        "intrepids": "070444-070631/1-2; 070444-070631/2-2",
        "oci": "070270",
        "reference": "Turco, M.Y, and, Moffett, A. 2019 Development of the human placenta. Development. 146: dev163428 DOI: 10.1242/dev.163428 PMID: 31776138"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "cited_doi": "10.1182/blood-2010-04-279489",
        "intrepids": "070444-070635/1-3; 070444-070635/2-3; 070444-070635/3-3",
        "oci": "070271",
        "reference": "Van Handel, B,, Prashad, S.L,, Hassanzadeh-Kiabi, N,, Huang, A,, Magnusson, M,, Atanassova, B,, Chen, A,, Hamalainen, E.I, and, Mikkola, H.K.A. 2010 The first trimester human placenta is a site for terminal maturation of primitive erythroid cells. Blood. 116: 3321â€“3330. DOI: 10.1182/blood-2010-04-279489 PMID: 20628147"
    }
]

#field_type str(citing_doi) str(cited_doi) str(oci) str(intrepids) str(reference)
#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci (GROUP_CONCAT(?intrepid; separator="; ") as ?intrepids) ?reference {

    VALUES ?citing_doi { "[[doi]]" }
	  ?article a fabio:Expression ;
          		datacite:hasIdentifier [
          			datacite:usesIdentifierScheme datacite:doi ;
          			literal:hasLiteralValue ?citing_doi ] .

  	?citation cito:hasCitingEntity ?article ;
              cito:hasCitedEntity ?cited_br ;
              ^oa:hasBody/^oco:hasAnnotation ?be ;
              datacite:hasIdentifier [
          			datacite:usesIdentifierScheme datacite:oci ;
          			literal:hasLiteralValue ?oci ] .

    ?be biro:references ?cited_br ; c4o:hasContent ?reference .

    OPTIONAL {
      ?cited_br
      datacite:hasIdentifier [
        datacite:usesIdentifierScheme datacite:doi ;
            literal:hasLiteralValue ?cited_doi ] .
    }

  	OPTIONAL {
        ?be ^c4o:denotes ?rp .
        ?rp datacite:hasIdentifier [
          datacite:usesIdentifierScheme datacite:intrepid ;
              literal:hasLiteralValue ?intrepid ] .

        ?rp oco:hasAnnotation /oa:hasBody ?rp_citation .
      }
}

GROUP BY ?reference ?intrepids ?oci ?citing_doi ?cited_doi

LIMIT 10000

#url /citations/{doi}
#type operation
#doi str(10\..+)
#preprocess lower(doi)
#method get
#description This operation retrieves citation data for all the works *citing the bibliographic resource identified by the input DOI*.

For each citing resource, the fields returned by this operation are the following:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the input cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *creation* the creation date or year of the citation according to the [ISO date format](https://en.wikipedia.org/wiki/ISO_8601) `YYYY-MM-DD` or `YYYY`, which corresponds to the publication date of the citing resource;
* *journal_sc* it records whether the citation is a journal self-citations (i.e. both the citing and the cited resource are published in the same journal);
* *author_sc* it records whether the citation is an author self-citation (i.e. the citing and the cited entities have at least one author in common).
#call /citations/10.1126/science.aat5031
#output_json [
    {
        "cited_doi": "10.1126/science.aat5031",
        "citing_doi": "10.1084/jem.20200891",
        "author_sc": "no",
        "journal_sc": "no",
        "creation": "2020-10-19",
        "oci": "070444-070613"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) datetime(creation) str(?journal_sc) str(?author_sc)
#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?creation (IF(bound(?jsc), "yes", "no") as ?journal_sc) (IF(bound(?asc), "yes", "no") as ?author_sc)
WHERE {
  ?cited_doi bds:search "[[doi]]" ;
         bds:matchExact "true" .
  ?doi literal:hasLiteralValue ?cited_doi ; datacite:usesIdentifierScheme datacite:doi .
  ?cited_article datacite:hasIdentifier ?doi ; ^cito:hasCitedEntity ?citation ;prism:publicationDate ?cited_creation .
  ?citation cito:hasCitingEntity ?citing_article ; ^oa:hasBody/^oco:hasAnnotation/biro:references ?cited_br;
  datacite:hasIdentifier [
    datacite:usesIdentifierScheme datacite:oci ;
    literal:hasLiteralValue ?oci ] .

  OPTIONAL {
    ?citing_article datacite:hasIdentifier [
                datacite:usesIdentifierScheme datacite:doi ;
                literal:hasLiteralValue ?citing_doi ] ;
                prism:publicationDate ?creation .
  }

  OPTIONAL{
    ?cited_article frbr:partOf+ ?journal . ?citing_article frbr:partOf+ ?journal .
    ?journal a fabio:Journal .
    BIND("yes" as ?jsc)
  }

  OPTIONAL{
    ?cited_article pro:isDocumentContextFor [
    	pro:withRole pro:author ;
    	pro:isHeldBy ?author ] .

    ?citing_article pro:isDocumentContextFor [
    	pro:withRole pro:author ;
    	pro:isHeldBy ?author ] .
    BIND("yes" as ?asc)
  }

}
LIMIT 10000

#url /citation/{oci}
#type operation
#oci str([0-9]+[-[0-9]+]?[\/[0-9]+]?)
#method get
#description This operation retrieves the citation metadata for the citation identified by the input Open Citation Identifier (OCI). OCI may appear in both of the forms above described, namely: `<citing_id>-<cited_id>` and `<citing_id>-<cited_id>/<nth-occurrence>`.

It is worth mentioning that, in this REST operation, the prefix "oci:" **should not** be specified, and only the dash-separated numbers of the OCI should be provided, as shown in the example below.

The fields returned by this operation are:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *creation* the creation date of the citation according to the [ISO date format](https://en.wikipedia.org/wiki/ISO_8601) `YYYY-MM-DD`, which corresponds to the publication date of the citing resource;
* *journal_sc* it records whether the citation is a journal self-citations (i.e. the citing and the cited entities are published in the same journal);
* *author_sc* it records whether the citation is an author self-citation (i.e. the citing and the cited entities have at least one author in common).

#call /citation/070444-070613
#output_json [
    {
        "cited_doi": "10.1126/science.aat5031",
        "citing_doi": "10.1084/jem.20200891",
        "author_sc": "no",
        "journal_sc": "no",
        "creation": "2020-10-19",
        "oci": "070444-070613"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) datetime(creation) str(?journal_sc) str(?author_sc)
#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
SELECT ?citing_doi ?cited_doi ?oci ?creation (IF(bound(?jsc), "yes", "no") as ?journal_sc) (IF(bound(?asc), "yes", "no") as ?author_sc)
WHERE {
        ?oci_iri datacite:hasIdentifier [
              datacite:usesIdentifierScheme datacite:oci ;
              literal:hasLiteralValue ?oci ] ;
              cito:hasCitingEntity ?citing_article ;
              cito:hasCitedEntity ?cited_article .

            OPTIONAL{
              ?cited_article frbr:partOf+ ?journal . ?citing_article frbr:partOf+ ?journal .
              ?journal a fabio:Journal .
              BIND("yes" as ?jsc)
            }

            ?citing_article datacite:hasIdentifier [
                    			datacite:usesIdentifierScheme datacite:doi ;
                    			literal:hasLiteralValue ?citing_doi ] ;
                            prism:publicationDate ?creation .

            OPTIONAL {
              ?cited_article datacite:hasIdentifier [
                          datacite:usesIdentifierScheme datacite:doi ;
                          literal:hasLiteralValue ?cited_doi ] .
            }

            OPTIONAL{
              ?cited_article pro:isDocumentContextFor [
              	pro:withRole pro:author ;
              	pro:isHeldBy ?author ] .

              ?citing_article pro:isDocumentContextFor [
              	pro:withRole pro:author ;
              	pro:isHeldBy ?author ] .
              BIND("yes" as ?asc)
            }

}
LIMIT 10000

#url /citation-count/{doi}
#type operation
#doi str(10\..+)
#preprocess lower(doi)
#method get
#description This operation retrieves the number of incoming citations to the bibliographic resource identified by the input DOI.

The fields returned by this operation are the following:

* *count* the number of incoming citations to the input bibliographic resource.
#call /citation-count/10.1126/science.aat5031
#field_type int(count)
#output_json [
    {
        "count": "1"
    }
]
#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT  (count(DISTINCT ?citing_article) as ?count)
WHERE {
  ?cited bds:search "[[doi]]" ;
         bds:matchExact "true" .
  ?doi literal:hasLiteralValue ?cited ; datacite:usesIdentifierScheme datacite:doi .
  ?cited_article datacite:hasIdentifier ?doi ; ^cito:hasCitedEntity ?citation .
  ?citation cito:hasCitingEntity ?citing_article ; ^oa:hasBody/^oco:hasAnnotation/biro:references ?cited_br.
}

#url /intext-citation/{intrepid}
#type operation
#intrepid str([0-9]+-[0-9]+\/[0-9]+-[0-9]+)
#method get
#description This operation retrieves information related to an in-text reference pointer identified by the input InTRePID.

The fields returned by this operation are the following:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intext_reference* the string identifying the in-text reference, e.g. `[3]`, or the string identifying the group of pointers (e.g. a sequence) including the in-text reference at hand, e.g. `[2-4]` ;
* *section_number* the number identifying the position of the section including the in-text reference (if applicable);
* *section_title* the title of the section where the in-text reference pointer appears;
* *paragraph_number* the number identifying the position of the paragraph including the in-text reference (if applicable);
* *footnote_number* the number identifying the position of the footnote including the in-text reference (if applicable);
* *figure_number* the number identifying the position of the figure caption including the in-text reference (if applicable);
* *table_number* the number identifying the position of the table including the in-text reference (if applicable);
* *sentence_number* the number identifying the position of the sentence including the in-text reference (if applicable);
* *source* the EPMC API call to retrieve the XML document of the bibliographic resource at hand;
* *in_list* whether the in-text reference pointer is part of a group of pointers (e.g. a list);
* *xpath_intext_reference* the XPath of the in-text reference with respect to the XML source document or the XPath of the group of pointers (e.g. a list) that the in-text reference at hand is part of (if applicable);
* *xpath_container* the XPath of the sentence or text chunk containing the in-text reference with respect to the XML source document;
#call /intext-citation/070444-070613/1-2
#output_json [
    {
        "caption_number": "",
        "paragraph_number": "3",
        "in_list": "yes",
        "table_number": "",
        "section_title": "Introduction",
        "sentence_number": "32",
        "oci": "070444-070613/1",
        "xpath_intext_reference": "/article/body/sec[1]/p[3]/xref[1]",
        "footnote_number": "",
        "section_number": "1",
        "intext_reference": "Stewart et al., 2019",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[1]/p[3]),1,153)",
        "cited_doi": "10.1126/science.aat5031",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) str(intext_reference) int(section_number) str(section_title) int(paragraph_number) int(footnote_number) int(caption_number) int(table_number) int(sentence_number) str(source) str(in_list) str(xpath_intext_reference) str(xpath_container)

#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?intext_reference ?section_number ?section_title ?paragraph_number ?footnote_number ?caption_number ?table_number ?sentence_number ?source (IF(bound(?list), "yes", "no") as ?in_list) ?xpath_intext_reference ?xpath_container  {

  ?intrepid bds:search "[[intrepid]]" ; bds:matchExact "true" .
  ?intrepid_uri literal:hasLiteralValue ?intrepid ; datacite:usesIdentifierScheme datacite:intrepid .

  ?rp datacite:hasIdentifier ?intrepid_uri ;
      oco:hasAnnotation / oa:hasBody ?citation ;
      ^co:element/^c4o:isContextOf|^c4o:isContextOf ?sentence .

  ?citation cito:hasCitingEntity ?citing_article ;
            cito:hasCitedEntity ?cited_article ;
            datacite:hasIdentifier [
              datacite:usesIdentifierScheme datacite:oci ;
              literal:hasLiteralValue ?oci ] .

  ?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?citing_doi ] .

  OPTIONAL {
    ?cited_article datacite:hasIdentifier [
      datacite:usesIdentifierScheme datacite:doi ;
      literal:hasLiteralValue ?cited_doi ] .
  }


  OPTIONAL {
  	?rp datacite:hasIdentifier [
    	datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?rp_xpath ] ;
    	c4o:hasContent ?rp_string .
  }

  OPTIONAL {
  	?rp ^co:element ?pl .
    ?pl datacite:hasIdentifier [
  		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
          literal:hasLiteralValue ?pl_xpath ] ;
        c4o:hasContent ?pl_string .
    BIND("yes" as ?list)
  }

  BIND(COALESCE(?rp_string, ?pl_string, "") AS ?intext_reference)
  BIND(COALESCE(?rp_xpath, ?pl_xpath, "") AS ?xpath_intext_reference)

  OPTIONAL {
  	?sentence ^frbr:part+ ?paragraph .
    ?paragraph a doco:Paragraph ; fabio:hasSequenceIdentifier ?paragraph_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?footnote .
    ?footnote a doco:Footnote ; fabio:hasSequenceIdentifier ?footnote_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?table .
    ?table a doco:Table ; fabio:hasSequenceIdentifier ?table_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?caption .
    ?caption a doco:Caption ; fabio:hasSequenceIdentifier ?caption_number .
  }

  OPTIONAL {
    ?sentence ^frbr:part+ ?section .
    ?section a doco:Section ;
        ^frbr:part ?citing_article ;
        fabio:hasSequenceIdentifier ?section_number .
    ?section dcterms:title ?section_title . }

  ?sentence datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?xpath_container ] .
  OPTIONAL { ?sentence fabio:hasSequenceIdentifier ?sentence_number . }

  ?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:pmid ;
        literal:hasLiteralValue ?pmid ] .
  BIND(CONCAT("https://www.ebi.ac.uk/europepmc/webservices/rest/",?pmid, "/fullTextXML") as ?source)
}

#url /intext-citations/doi/{doi}
#type operation
#doi str(10\..+)
#preprocess lower(doi)
#method get
#description This operation retrieves information related to all the in-text reference pointers denoting the cited bibliographic resource identified by the input DOI.

For each in-text reference pointer, the fields returned by this operation are the following:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the input cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intext_reference* the string identifying the in-text reference, e.g. `[3]`, or the string identifying the group of pointers (e.g. a sequence) including the in-text reference at hand, e.g. `[2-4]` ;
* *section_number* the number identifying the position of the section including the in-text reference (if applicable);
* *section_title* the title of the section where the in-text reference pointer appears;
* *paragraph_number* the number identifying the position of the paragraph including the in-text reference (if applicable);
* *footnote_number* the number identifying the position of the footnote including the in-text reference (if applicable);
* *figure_number* the number identifying the position of the figure caption including the in-text reference (if applicable);
* *table_number* the number identifying the position of the table including the in-text reference (if applicable);
* *sentence_number* the number identifying the position of the sentence including the in-text reference (if applicable);
* *source* the EPMC API call to retrieve the XML document of the bibliographic resource at hand;
* *in_list* whether the in-text reference pointer is part of a group of pointers (e.g. a list);
* *xpath_intext_reference* the XPath of the in-text reference with respect to the XML source document or the XPath of the group of pointers (e.g. a list) that the in-text reference at hand is part of (if applicable);
* *xpath_container* the XPath of the sentence or text chunk containing the in-text reference with respect to the XML source document;
#call /intext-citations/doi/10.1126/science.aat5031
#output_json [
    {
        "caption_number": "",
        "paragraph_number": "3",
        "in_list": "yes",
        "table_number": "",
        "section_title": "Introduction",
        "sentence_number": "32",
        "oci": "070444-070613/1",
        "xpath_intext_reference": "/article/body/sec[1]/p[3]/xref[1]",
        "footnote_number": "",
        "section_number": "1",
        "intext_reference": "Stewart et al., 2019",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[1]/p[3]),1,153)",
        "cited_doi": "10.1126/science.aat5031",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML"
    },
    {
        "caption_number": "",
        "paragraph_number": "61",
        "in_list": "no",
        "table_number": "",
        "section_title": "Materials and methods",
        "sentence_number": "3278",
        "oci": "070444-070613/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[4]/xref",
        "footnote_number": "",
        "section_number": "4",
        "intext_reference": "(Stewart et al., 2019)",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[4]/sec[16]/p[4]),1,168)",
        "cited_doi": "10.1126/science.aat5031",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) str(intext_reference) int(section_number) str(section_title) int(paragraph_number) int(footnote_number) int(caption_number) int(table_number) int(sentence_number) str(source) str(in_list) str(xpath_intext_reference) str(xpath_container)

#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?intext_reference ?section_number ?section_title ?paragraph_number ?footnote_number ?caption_number ?table_number ?sentence_number ?source (IF(bound(?list), "yes", "no") as ?in_list) ?xpath_intext_reference ?xpath_container  {

  ?cited_doi bds:search "[[doi]]" ; bds:matchExact "true" .
  ?cited_doi_id literal:hasLiteralValue ?cited_doi ;
                datacite:usesIdentifierScheme datacite:doi ;
                ^datacite:hasIdentifier ?cited_article .

  ?cited_article ^cito:hasCitedEntity ?citation .
  ?citation cito:hasCitingEntity ?citing_article ;
  datacite:usesIdentifierScheme datacite:oci ;
      literal:hasLiteralValue ?oci ] .

  ?rp oco:hasAnnotation / oa:hasBody ?citation ;
      ^co:element/^c4o:isContextOf|^c4o:isContextOf ?sentence .

  OPTIONAL {
  ?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?citing_doi ] .
  }


  OPTIONAL {
  	?rp datacite:hasIdentifier [
    	datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?rp_xpath ] ;
    	c4o:hasContent ?rp_string .
  }

  OPTIONAL {
  	?rp ^co:element ?pl .
    ?pl datacite:hasIdentifier [
  		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
          literal:hasLiteralValue ?pl_xpath ] ;
        c4o:hasContent ?pl_string .
    BIND("yes" as ?list)
  }

  BIND(COALESCE(?rp_string, ?pl_string, "") AS ?intext_reference)
  BIND(COALESCE(?rp_xpath, ?pl_xpath, "") AS ?xpath_intext_reference)

  OPTIONAL {
  	?sentence ^frbr:part+ ?paragraph .
    ?paragraph a doco:Paragraph ; fabio:hasSequenceIdentifier ?paragraph_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?footnote .
    ?footnote a doco:Footnote ; fabio:hasSequenceIdentifier ?footnote_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?table .
    ?table a doco:Table ; fabio:hasSequenceIdentifier ?table_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?caption .
    ?caption a doco:Caption ; fabio:hasSequenceIdentifier ?caption_number .
  }

  OPTIONAL {
    ?sentence ^frbr:part+ ?section .
    ?section a doco:Section ;
        ^frbr:part ?citing_article ;
        fabio:hasSequenceIdentifier ?section_number .
    ?section dcterms:title ?section_title . }

  ?sentence datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?xpath_container ] .
  OPTIONAL { ?sentence fabio:hasSequenceIdentifier ?sentence_number . }

  ?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:pmid ;
        literal:hasLiteralValue ?pmid ] .
  BIND(CONCAT("https://www.ebi.ac.uk/europepmc/webservices/rest/",?pmid, "/fullTextXML") as ?source)
}
LIMIT 10000

#url /intext-citations/pmid/{pmid}
#type operation
#pmid str([0-9]+)
#method get
#description This operation retrieves information related to all the in-text reference pointers denoting the cited bibliographic resource identified by the input PMID.

For each in-text reference pointer, the fields returned by this operation are the following:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the input cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intext_reference* the string identifying the in-text reference, e.g. `[3]`, or the string identifying the group of pointers (e.g. a sequence) including the in-text reference at hand, e.g. `[2-4]` ;
* *section_number* the number identifying the position of the section including the in-text reference (if applicable);
* *section_title* the title of the section where the in-text reference pointer appears;
* *paragraph_number* the number identifying the position of the paragraph including the in-text reference (if applicable);
* *footnote_number* the number identifying the position of the footnote including the in-text reference (if applicable);
* *figure_number* the number identifying the position of the figure caption including the in-text reference (if applicable);
* *table_number* the number identifying the position of the table including the in-text reference (if applicable);
* *sentence_number* the number identifying the position of the sentence including the in-text reference (if applicable);
* *source* the EPMC API call to retrieve the XML document of the bibliographic resource at hand;
* *in_list* whether the in-text reference pointer is part of a group of pointers (e.g. a list);
* *xpath_intext_reference* the XPath of the in-text reference with respect to the XML source document or the XPath of the group of pointers (e.g. a list) that the in-text reference at hand is part of (if applicable);
* *xpath_container* the XPath of the sentence or text chunk containing the in-text reference with respect to the XML source document;
#call /intext-citations/pmid/31604275
#output_json [
    {
        "caption_number": "",
        "paragraph_number": "3",
        "in_list": "yes",
        "table_number": "",
        "section_title": "Introduction",
        "sentence_number": "32",
        "oci": "070444-070613/1",
        "xpath_intext_reference": "/article/body/sec[1]/p[3]/xref[1]",
        "footnote_number": "",
        "section_number": "1",
        "intext_reference": "Stewart et al., 2019",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[1]/p[3]),1,153)",
        "cited_doi": "10.1126/science.aat5031",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML"
    },
    {
        "caption_number": "",
        "paragraph_number": "61",
        "in_list": "no",
        "table_number": "",
        "section_title": "Materials and methods",
        "sentence_number": "3278",
        "oci": "070444-070613/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[4]/xref",
        "footnote_number": "",
        "section_number": "4",
        "intext_reference": "(Stewart et al., 2019)",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[4]/sec[16]/p[4]),1,168)",
        "cited_doi": "10.1126/science.aat5031",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) str(intext_reference) int(section_number) str(section_title) int(paragraph_number) int(footnote_number) int(caption_number) int(table_number) int(sentence_number) str(source) str(in_list) str(xpath_intext_reference) str(xpath_container)

#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?intext_reference ?section_number ?section_title ?paragraph_number ?footnote_number ?caption_number ?table_number ?sentence_number ?source (IF(bound(?list), "yes", "no") as ?in_list) ?xpath_intext_reference ?xpath_container  {

  ?cited_pmid bds:search "[[pmid]]" ; bds:matchExact "true" .
  ?cited_pmid_id literal:hasLiteralValue ?cited_pmid ;
                datacite:usesIdentifierScheme datacite:pmid ;
                ^datacite:hasIdentifier ?cited_article .

  ?cited_article ^cito:hasCitedEntity ?citation .
  ?citation cito:hasCitingEntity ?citing_article ;
  datacite:usesIdentifierScheme datacite:oci ;
      literal:hasLiteralValue ?oci ] .
  ?rp oco:hasAnnotation / oa:hasBody ?citation ;
      ^co:element/^c4o:isContextOf|^c4o:isContextOf ?sentence .

  OPTIONAL {
  ?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?citing_doi ] .
  }

  OPTIONAL {
  ?cited_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?cited_doi ] .
  }


  OPTIONAL {
  	?rp datacite:hasIdentifier [
    	datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?rp_xpath ] ;
    	c4o:hasContent ?rp_string .
  }

  OPTIONAL {
  	?rp ^co:element ?pl .
    ?pl datacite:hasIdentifier [
  		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
          literal:hasLiteralValue ?pl_xpath ] ;
        c4o:hasContent ?pl_string .
    BIND("yes" as ?list)
  }

  BIND(COALESCE(?rp_string, ?pl_string, "") AS ?intext_reference)
  BIND(COALESCE(?rp_xpath, ?pl_xpath, "") AS ?xpath_intext_reference)

  OPTIONAL {
  	?sentence ^frbr:part+ ?paragraph .
    ?paragraph a doco:Paragraph ; fabio:hasSequenceIdentifier ?paragraph_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?footnote .
    ?footnote a doco:Footnote ; fabio:hasSequenceIdentifier ?footnote_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?table .
    ?table a doco:Table ; fabio:hasSequenceIdentifier ?table_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?caption .
    ?caption a doco:Caption ; fabio:hasSequenceIdentifier ?caption_number .
  }

  OPTIONAL {
    ?sentence ^frbr:part+ ?section .
    ?section a doco:Section ;
        ^frbr:part ?citing_article ;
        fabio:hasSequenceIdentifier ?section_number .
    ?section dcterms:title ?section_title . }

  ?sentence datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?xpath_container ] .
  OPTIONAL { ?sentence fabio:hasSequenceIdentifier ?sentence_number . }

  ?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:pmid ;
        literal:hasLiteralValue ?pmid ] .
  BIND(CONCAT("https://www.ebi.ac.uk/europepmc/webservices/rest/",?pmid, "/fullTextXML") as ?source)
}

LIMIT 10000

#url /in-sentence/{sentence}/{doi}
#type operation
#sentence str([0-9]+)
#doi str(10\..+)
#method get
#description This operation retrieves all the in-text references that appear in the specified sentence of the bibliographic resource identified by DOI.

For each in-text reference pointer, the fields returned by this operation are the following:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the input cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intext_reference* the string identifying the in-text reference, e.g. `[3]`, or the string identifying the group of pointers (e.g. a sequence) including the in-text reference at hand, e.g. `[2-4]` ;
* *section_number* the number identifying the position of the section including the in-text reference (if applicable);
* *section_title* the title of the section where the in-text reference pointer appears;
* *paragraph_number* the number identifying the position of the paragraph including the in-text reference (if applicable);
* *source* the EPMC API call to retrieve the XML document of the bibliographic resource at hand;
* *in_list* whether the in-text reference pointer is part of a group of pointers (e.g. a list);
* *xpath_intext_reference* the XPath of the in-text reference with respect to the XML source document or the XPath of the group of pointers (e.g. a list) that the in-text reference at hand is part of (if applicable);
* *xpath_container* the XPath of the sentence or text chunk containing the in-text reference with respect to the XML source document;
#call /in-sentence/3278/10.1084/jem.20200891
#output_json [
    {
        "paragraph_number": "61",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070613/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[4]/xref",
        "intext_reference": "(Stewart et al., 2019)",
        "section_number": "4",
        "in_list": "no",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[4]/sec[16]/p[4]),1,168)",
        "cited_doi": "10.1126/science.aat5031",
        "section_title": "Materials and methods"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) str(intext_reference) int(section_number) str(section_title) int(paragraph_number) str(source) str(in_list) str(xpath_intext_reference) str(xpath_container)

#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?intext_reference ?section_number ?section_title ?paragraph_number ?source (IF(bound(?list), "yes", "no") as ?in_list) ?xpath_intext_reference ?xpath_container  {
  hint:Query hint:optimizer "Runtime".
  #BIND(STRBEFORE(str("[[sentence_and_doi]]"), "/10.") AS ?sentence_number) .
  #BIND(LCASE( CONCAT(str("10."), STRAFTER(str("[[sentence_and_doi]]"), "/10.")) ) AS ?citing_doi)
  BIND("[[sentence]]" AS ?sentence_number) .
  BIND("[[doi]]" AS ?citing_doi) .
  ?citing_doi_iri literal:hasLiteralValue ?citing_doi ;
                datacite:usesIdentifierScheme datacite:doi ;
                ^datacite:hasIdentifier ?citing_article .

  ?citing_article frbr:part+ ?sentence .
  ?sentence a doco:Sentence ; fabio:hasSequenceIdentifier ?sentence_number  .

  ?rp (^co:element/^c4o:isContextOf)|^c4o:isContextOf ?sentence ;
      oco:hasAnnotation / oa:hasBody ?citation .


  ?citation cito:hasCitedEntity ?cited_article ;
  datacite:hasIdentifier [
    datacite:usesIdentifierScheme datacite:oci ;
        literal:hasLiteralValue ?oci ] .

  OPTIONAL {
  ?cited_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?cited_doi ] .
  }

  OPTIONAL {
  	?rp datacite:hasIdentifier [
    	datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?rp_xpath ] ;
    	c4o:hasContent ?rp_string .
  }

  OPTIONAL {
  	?rp ^co:element ?pl .
    ?pl datacite:hasIdentifier [
  		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
          literal:hasLiteralValue ?pl_xpath ] ;
        c4o:hasContent ?pl_string .
    BIND("yes" as ?list)
  }

  BIND(COALESCE(?rp_string, ?pl_string, "") AS ?intext_reference)
  BIND(COALESCE(?rp_xpath, ?pl_xpath, "") AS ?xpath_intext_reference)

  OPTIONAL {
  	?sentence ^frbr:part+ ?paragraph .
    ?paragraph a doco:Paragraph ; fabio:hasSequenceIdentifier ?paragraph_number .
  }

  OPTIONAL {
    ?sentence ^frbr:part+ ?section .
    ?section a doco:Section ; ^frbr:part ?citing_article ;
        fabio:hasSequenceIdentifier ?section_number .
    ?section dcterms:title ?section_title .
  }

  ?sentence datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?xpath_container ] .

  OPTIONAL {
  	?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:pmid ;
        literal:hasLiteralValue ?pmid ] .

  	BIND(CONCAT("https://www.ebi.ac.uk/europepmc/webservices/rest/",?pmid, "/fullTextXML") as ?source)
}

}

LIMIT 10000

#url /in-paragraph/{paragraph}/{doi}
#type operation
#paragraph str([0-9]+)
#doi str(10\..+)
#method get
#description This operation retrieves all the in-text references that appear in the specified paragraph of the bibliographic resource identified by DOI.

For each in-text reference pointer, the fields returned by this operation are the following:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the input cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intext_reference* the string identifying the in-text reference, e.g. `[3]`, or the string identifying the group of pointers (e.g. a sequence) including the in-text reference at hand, e.g. `[2-4]` ;
* *section_number* the number identifying the position of the section including the in-text reference (if applicable);
* *section_title* the title of the section where the in-text reference pointer appears;
* *source* the EPMC API call to retrieve the XML document of the bibliographic resource at hand;
* *in_list* whether the in-text reference pointer is part of a group of pointers (e.g. a list);
* *xpath_intext_reference* the XPath of the in-text reference with respect to the XML source document or the XPath of the group of pointers (e.g. a list) that the in-text reference at hand is part of (if applicable);
* *xpath_container* the XPath of the paragraph containing the in-text reference with respect to the XML source document;
#call /in-paragraph/61/10.1084/jem.20200891
#output_json [
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070613/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[4]/xref",
        "intext_reference": "(Stewart et al., 2019)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]/sec[16]/p[4]",
        "cited_doi": "10.1126/science.aat5031",
        "section_title": "Materials and methods"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) str(intext_reference) int(section_number) str(section_title) str(source) str(in_list) str(xpath_intext_reference) str(xpath_container)

#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?intext_reference ?section_number ?section_title ?source (IF(bound(?list), "yes", "no") as ?in_list) ?xpath_intext_reference ?xpath_container  {
  hint:Query hint:optimizer "Runtime".
  #BIND(LCASE( CONCAT(str("10."), STRAFTER(str("[[paragraph_and_doi]]"), "/10.")) ) AS ?citing_doi)
  #BIND(STRBEFORE(str("[[paragraph_and_doi]]"), "/10.") AS ?paragraph_number) .
  BIND("[[paragraph]]" AS ?paragraph_number) .
  BIND("[[doi]]" AS ?citing_doi) .
  ?citing_doi_iri literal:hasLiteralValue ?citing_doi ;
                datacite:usesIdentifierScheme datacite:doi ;
                ^datacite:hasIdentifier ?citing_article .

  ?citing_article frbr:part+ ?paragraph .
  ?paragraph a doco:Paragraph ; fabio:hasSequenceIdentifier ?paragraph_number .

  ?rp (^co:element / ^c4o:isContextOf/^frbr:part+)|(^c4o:isContextOf/^frbr:part+) ?paragraph ;
      oco:hasAnnotation / oa:hasBody ?citation .


  ?citation cito:hasCitedEntity ?cited_article ;
  datacite:hasIdentifier [
    datacite:usesIdentifierScheme datacite:oci ;
        literal:hasLiteralValue ?oci ] .

  OPTIONAL {
  ?cited_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?cited_doi ] .
  }

  OPTIONAL {
  	?rp datacite:hasIdentifier [
    	datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?rp_xpath ] ;
    	c4o:hasContent ?rp_string .
  }

  OPTIONAL {
  	?rp ^co:element ?pl .
    ?pl datacite:hasIdentifier [
  		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
          literal:hasLiteralValue ?pl_xpath ] ;
        c4o:hasContent ?pl_string .
    BIND("yes" as ?list)
  }

  BIND(COALESCE(?rp_string, ?pl_string, "") AS ?intext_reference)
  BIND(COALESCE(?rp_xpath, ?pl_xpath, "") AS ?xpath_intext_reference)


  OPTIONAL {
    ?paragraph ^frbr:part+ ?section .
    ?section a doco:Section ; ^frbr:part ?citing_article ;
        fabio:hasSequenceIdentifier ?section_number .
    ?section dcterms:title ?section_title .
  }

  ?paragraph datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?xpath_container ] .

  OPTIONAL {
  	?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:pmid ;
        literal:hasLiteralValue ?pmid ] .

  	BIND(CONCAT("https://www.ebi.ac.uk/europepmc/webservices/rest/",?pmid, "/fullTextXML") as ?source)
  }

}

LIMIT 10000

#url /in-section/{section}/{doi}
#type operation
#section str([0-9]+)
#doi str(10\..+)
#method get
#description This operation retrieves all the in-text references that appear in the specified section of the bibliographic resource identified by DOI.

For each in-text reference pointer, the fields returned by this operation are the following:

* *citing_doi* the DOI of the citing bibliographic resource;
* *cited_doi* the DOI of the input cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intext_reference* the string identifying the in-text reference, e.g. `[3]`, or the string identifying the group of pointers (e.g. a sequence) including the in-text reference at hand, e.g. `[2-4]` ;
* *section_title* the title of the section where the in-text reference pointer appears;
* *source* the EPMC API call to retrieve the XML document of the bibliographic resource at hand;
* *in_list* whether the in-text reference pointer is part of a group of pointers (e.g. a list);
* *xpath_intext_reference* the XPath of the in-text reference with respect to the XML source document or the XPath of the group of pointers (e.g. a list) that the in-text reference at hand is part of (if applicable);
* *xpath_container* the XPath of the section containing the in-text reference with respect to the XML source document;
#call /in-section/4/10.1084/jem.20200891
#output_json [
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070524/1",
        "xpath_intext_reference": "/article/body/sec[4]/sec[2]/p/xref",
        "intext_reference": "(Huhn et al., 2020)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/s41467-019-14123-z",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070641/1",
        "xpath_intext_reference": "/article/body/sec[4]/sec[4]/p/xref[1]",
        "intext_reference": "(Wang et al., 2014)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/jid.2013.481",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070461/1",
        "xpath_intext_reference": "/article/body/sec[4]/sec[5]/p/xref",
        "intext_reference": "(Burton, 1986)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070601/1",
        "xpath_intext_reference": "/article/body/sec[4]/sec[7]/p/xref[1]",
        "intext_reference": "(Sharkey et al., 1999)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1095/biolreprod60.2.355",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070503/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[14]/p/xref[1]",
        "intext_reference": "(Foote et al., 2017)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.3791/55107",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070503/3",
        "xpath_intext_reference": "/article/body/sec[4]/sec[14]/p/xref[2]",
        "intext_reference": "(Foote et al., 2017)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.3791/55107",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070638/9",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[1]/xref[1]",
        "intext_reference": "(Vento-Tormo et al., 2018)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/s41586-018-0698-6",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070473/1",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[1]/xref[2]",
        "intext_reference": "Butler et al., 2018",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/nbt.4096",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070544/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[3]/xref",
        "intext_reference": "La Manno et al., 2018",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/s41586-018-0414-6",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070613/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[4]/xref",
        "intext_reference": "(Stewart et al., 2019)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1126/science.aat5031",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070580/3",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[5]/xref[1]",
        "intext_reference": "Ramachandran et al., 2019",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/s41586-019-1631-3",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070452/5",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[5]/xref[2]",
        "intext_reference": "(Bian et al., 2020)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/s41586-020-2316-7",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070656/3",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[5]/xref[3]",
        "intext_reference": "(Zeng et al., 2019)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/s41422-019-0228-6",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070616/2",
        "xpath_intext_reference": "/article/body/sec[4]/sec[16]/p[6]/xref",
        "intext_reference": "(Street et al., 2018)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1186/s12864-018-4772-0",
        "section_title": "Materials and methods"
    },
    {
        "citing_doi": "10.1084/jem.20200891",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML",
        "oci": "070444-070491/1",
        "xpath_intext_reference": "/article/body/sec[4]/sec[17]/p/xref",
        "intext_reference": "(Efremova et al., 2020)",
        "section_number": "4",
        "in_list": "no",
        "xpath_container": "/article/body/sec[4]",
        "cited_doi": "10.1038/s41596-020-0292-x",
        "section_title": "Materials and methods"
    }
]
#field_type str(citing_doi) str(cited_doi) str(oci) str(intext_reference) str(section_title) str(source) str(in_list) str(xpath_intext_reference) str(xpath_container)

#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?intext_reference ?section_number ?section_title ?source (IF(bound(?list), "yes", "no") as ?in_list) ?xpath_intext_reference ?xpath_container  {
  hint:Query hint:optimizer "Runtime".
  #BIND(LCASE( CONCAT(str("10."), STRAFTER(str("[[section_and_doi]]"), "/10.")) ) AS ?citing_doi)
  #BIND(STRBEFORE(str("[[section_and_doi]]"), "/10.") AS ?section_number) .
  BIND("[[section]]" AS ?section_number) .
  BIND("[[doi]]" AS ?citing_doi) .
  ?citing_doi_iri literal:hasLiteralValue ?citing_doi ;
                datacite:usesIdentifierScheme datacite:doi ;
                ^datacite:hasIdentifier ?citing_article .

  ?citing_article frbr:part+ ?section .
  ?section a doco:Section ; fabio:hasSequenceIdentifier ?section_number .

  ?rp (^co:element / ^c4o:isContextOf/^frbr:part+)|(^c4o:isContextOf/^frbr:part+) ?section ;
      oco:hasAnnotation / oa:hasBody ?citation .

  ?citation cito:hasCitedEntity ?cited_article ;
  datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:oci ;
        literal:hasLiteralValue ?oci ] .

  OPTIONAL {
  ?cited_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?cited_doi ] .
  }

  OPTIONAL {
  	?rp datacite:hasIdentifier [
    	datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?rp_xpath ] ;
    	c4o:hasContent ?rp_string .
  }

  OPTIONAL {
  	?rp ^co:element ?pl .
    ?pl datacite:hasIdentifier [
  		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
          literal:hasLiteralValue ?pl_xpath ] ;
        c4o:hasContent ?pl_string .
    BIND("yes" as ?list)
  }

  BIND(COALESCE(?rp_string, ?pl_string, "") AS ?intext_reference)
  BIND(COALESCE(?rp_xpath, ?pl_xpath, "") AS ?xpath_intext_reference)


  OPTIONAL { ?section dcterms:title ?section_title . }

  ?section datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?xpath_container ] .

  OPTIONAL {
  	?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:pmid ;
        literal:hasLiteralValue ?pmid ] .

  	BIND(CONCAT("https://www.ebi.ac.uk/europepmc/webservices/rest/",?pmid, "/fullTextXML") as ?source)
  }

}

LIMIT 10000

#url /in-article/{doi}
#type operation
#doi str(10\..+)
#method get
#description This operation retrieves all the in-text references that appear in the bibliographic resource identified by the input DOI.

For each in-text reference pointer, the fields returned by this operation are the following:

* *citing_doi* the DOI of the input citing bibliographic resource;
* *cited_doi* the DOI of the cited bibliographic resource;
* *oci* the Open Citation Identifier (OCI) of the citation at hand;
* *intext_reference* the string identifying the in-text reference, e.g. `[3]`, or the string identifying the group of pointers (e.g. a sequence) including the in-text reference at hand, e.g. `[2-4]` ;
* *section_number* the number identifying the position of the section including the in-text reference (if applicable);
* *section_title* the title of the section where the in-text reference pointer appears;
* *paragraph_number* the number identifying the position of the paragraph including the in-text reference (if applicable);
* *footnote_number* the number identifying the position of the footnote including the in-text reference (if applicable);
* *figure_number* the number identifying the position of the figure caption including the in-text reference (if applicable);
* *table_number* the number identifying the position of the table including the in-text reference (if applicable);
* *sentence_number* the number identifying the position of the sentence including the in-text reference (if applicable);
* *source* the EPMC API call to retrieve the XML document of the bibliographic resource at hand;
* *in_list* whether the in-text reference pointer is part of a group of pointers (e.g. a list);
* *xpath_intext_reference* the XPath of the in-text reference with respect to the XML source document or the XPath of the group of pointers (e.g. a list) that the in-text reference at hand is part of (if applicable);
* *xpath_container* the XPath of the sentence or text chunk containing the in-text reference with respect to the XML source document;
#call /in-article/10.1084/jem.20200891
#output_json [
    {
        "caption_number": "",
        "paragraph_number": "1",
        "in_list": "yes",
        "table_number": "",
        "section_title": "Introduction",
        "sentence_number": "3",
        "oci": "070444-070515/1",
        "xpath_intext_reference": "/article/body/sec[1]/p[1]/xref[1]",
        "footnote_number": "",
        "section_number": "1",
        "intext_reference": "Ginhoux et al., 2010",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[1]/p[1]),276,220)",
        "cited_doi": "10.1126/science.1194637",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML"
    },
    {
        "caption_number": "",
        "paragraph_number": "1",
        "in_list": "yes",
        "table_number": "",
        "section_title": "Introduction",
        "sentence_number": "3",
        "oci": "070444-070520/1",
        "xpath_intext_reference": "/article/body/sec[1]/p[1]/xref[2]",
        "footnote_number": "",
        "section_number": "1",
        "intext_reference": "Gomez Perdiguero et al., 2015",
        "citing_doi": "10.1084/jem.20200891",
        "xpath_container": "substring(string(/article/body/sec[1]/p[1]),276,220)",
        "cited_doi": "10.1038/nature13989",
        "source": "https://www.ebi.ac.uk/europepmc/webservices/rest/33075123/fullTextXML"
    },
    ...
]
#field_type str(citing_doi) str(cited_doi) str(oci) str(intext_reference) int(section_number) str(section_title) int(paragraph_number) int(footnote_number) int(caption_number) int(table_number) int(sentence_number) str(source) str(in_list) str(xpath_intext_reference) str(xpath_container)

#sparql PREFIX biro: <http://purl.org/spar/biro/>
PREFIX cito: <http://purl.org/spar/cito/>
PREFIX co: <http://purl.org/co/>
PREFIX c4o: <http://purl.org/spar/c4o/>
PREFIX dcterms: <http://purl.org/dc/terms/>
PREFIX doco: <http://purl.org/spar/doco/>
PREFIX fabio: <http://purl.org/spar/fabio/>
PREFIX frbr: <http://purl.org/vocab/frbr/core#>
PREFIX datacite: <http://purl.org/spar/datacite/>
PREFIX literal: <http://www.essepuntato.it/2010/06/literalreification/>
PREFIX pro: <http://purl.org/spar/pro/>
PREFIX oa: <http://www.w3.org/ns/oa#>
PREFIX oco: <https://w3id.org/oc/ontology/>
PREFIX prism: <http://prismstandard.org/namespaces/basic/2.0/>
prefix bds: <http://www.bigdata.com/rdf/search#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?citing_doi ?cited_doi ?oci ?intext_reference ?section_number ?section_title ?paragraph_number ?footnote_number ?caption_number ?table_number ?sentence_number ?source (IF(bound(?list), "yes", "no") as ?in_list) ?xpath_intext_reference ?xpath_container  {

  ?citing_doi bds:search "[[doi]]" ; bds:matchExact "true" .
  ?citing_doi_id literal:hasLiteralValue ?citing_doi ;
                datacite:usesIdentifierScheme datacite:doi ;
                ^datacite:hasIdentifier ?citing_article .

  ?citing_article ^cito:hasCitingEntity ?citation .
  ?citation cito:hasCitedEntity ?cited_article ;
    datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:oci ;
        literal:hasLiteralValue ?oci ] .
  ?rp oco:hasAnnotation / oa:hasBody ?citation ;
      (^co:element/^c4o:isContextOf)|^c4o:isContextOf ?sentence .

  OPTIONAL {
  ?cited_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:doi ;
        literal:hasLiteralValue ?cited_doi ] .
  }

  OPTIONAL {
  	?rp datacite:hasIdentifier [
    	datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?rp_xpath ] ;
    	c4o:hasContent ?rp_string .
  }

  OPTIONAL {
  	?rp ^co:element ?pl .
    ?pl datacite:hasIdentifier [
  		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
          literal:hasLiteralValue ?pl_xpath ] ;
        c4o:hasContent ?pl_string .
    BIND("yes" as ?list)
  }

  BIND(COALESCE(?rp_string, ?pl_string, "") AS ?intext_reference)
  BIND(COALESCE(?rp_xpath, ?pl_xpath, "") AS ?xpath_intext_reference)

  OPTIONAL {
  	?sentence ^frbr:part+ ?paragraph .
    ?paragraph a doco:Paragraph ; fabio:hasSequenceIdentifier ?paragraph_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?footnote .
    ?footnote a doco:Footnote ; fabio:hasSequenceIdentifier ?footnote_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?table .
    ?table a doco:Table ; fabio:hasSequenceIdentifier ?table_number .
  }

  OPTIONAL {
  	?sentence ^frbr:part+ ?caption .
    ?caption a doco:Caption ; fabio:hasSequenceIdentifier ?caption_number .
  }

  OPTIONAL {
    ?sentence ^frbr:part+ ?section .
    ?section a doco:Section ;
        ^frbr:part ?citing_article ;
        fabio:hasSequenceIdentifier ?section_number .
    ?section dcterms:title ?section_title . }

  ?sentence datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:local-resource-identifier-scheme ;
        literal:hasLiteralValue ?xpath_container ] .
  OPTIONAL { ?sentence fabio:hasSequenceIdentifier ?sentence_number . }

  ?citing_article datacite:hasIdentifier [
		datacite:usesIdentifierScheme datacite:pmid ;
        literal:hasLiteralValue ?pmid ] .
  BIND(CONCAT("https://www.ebi.ac.uk/europepmc/webservices/rest/",?pmid, "/fullTextXML") as ?source)
}
LIMIT 10000
